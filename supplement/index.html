<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>LinkedCharts - Supplement to the paper</title>
	<script type="text/javascript" src="src/linked-charts.min.js"></script>
	<script type="text/javascript" src="src/prism.js"></script>
	<link rel="stylesheet" type="text/css" href="src/prism.css">
	<link rel="stylesheet" type="text/css" href="src/linked-charts.css">
	<link rel="stylesheet" type="text/css" href="src/style.css">
</head>
<body>
	<div id="header">
		<h1>LinkedCharts - Supplement to the paper</h1>
		<p>This page provides live versions of all the figures from the main paper. Each example is given as a full version with all the decorations, labels and titles and as a minimalistic app with only essential features. For each example, one can look at the full code necessary to generate the app both as an R script and as a JavaScript code. To run the R code, "rlc" package must be installed from <a href="https://CRAN.R-project.org/package=rlc">CRAN</a> or <a href="https://github.com/anders-biostat/rlc">GitHub</a> for the most recent version. JavaScript relies on the <i>linked-charts.js</i> library that can be downloaded from <a href="https://anders-biostat.github.io/linked-charts/js/">here</a>. Links to all the required data for each example are given in the description below.</p>
	</div>
	<div id="gallery">
		<div id="navigation">
			<div id="tabs"></div>
		</div>
		<div id="panel"></div>
		<div id="example">
			<div class="aspect-ratio">
				<iframe frameBorder="0"></iframe>	
			</div>
		</div>
		<div id="description"></div>
	</div>
	<script type="text/javascript">
		const examples = [{
				name: "Oral cancer, differential expression",
				id: "oc_de",
				ar: "45%",
				descr: 'Overview of genes differentially expressed in cancerous and normal tissues from <a href="https://doi.org/10.18632/oncotarget.5529">Conway et al. (2015)</a>. MA plot (A) shows all the sequenced genes with their average expression on X-axis and log-fold change on Y-axis. Red indicates genes, where the difference was reported as significant by the <a href="https://bioconductor.org/packages/release/bioc/html/limma.html">"limma"</a> package. Plot to the left (B) shows expression values (CPMs) for a selected gene and all the patients. LinkedCharts allows one to linkt the two plots. When the user clicks on a point of the MA plot, the expression plot changes, showing the new selected gene. In such a way, one can check immediately, whether the genes, labeled as significantly different, are interesting for further study.<br><br>To run the provided code, please, download the following data:<br><b>For R:</b> <a href="https://anders-biostat.github.io/linked-charts/rlc/tutorials/oscc/oscc.rda">ocss.rda</a><br><b>For JS:</b> <a href="https://github.com/anders-biostat/linked-charts/raw/master/docs/rlc/tutorials/oscc/maData.js">maData.js</a> and <a href="https://github.com/anders-biostat/linked-charts/raw/master/docs/rlc/tutorials/oscc/heatmapData.js">heatmapData.js</a>'
			}, {
				name: "Basic syntax, Iris dataset",
				id: "basic_synt",
				ar: "45%",
				descr: 'This very basic example shows how to make a simple "static" plot with LinkedCharts. "Static" here means only that the plot is not linked to any ohter and, in this sense reminds, non-interactive graphics rather than an app. However, there is still some in-built interactivity in every chart from the LinkedCharts library, such as zooming, panning and saving the current state of the plot as an image. Please, try the tool panel (opens by the grey button in the upper right corner) to explore all possible actions.<br><br>To run the provided code, please, download the following data:<br><b>For R:</b> The Iris dataset can be loaded with the \'data("iris")\' command<br><b>For JS:</b> <a href="https://github.com/kloivenn/kloivenn.github.io/raw/master/Bioconductor2018/src/js/iris.js">iris.js</a>'
			}, {
				name: "Example gallery",
				id: "gallery",
				ar: "57%",
				descr: 'Here, one can find a collection of all charts of the R/LinkedCharts library (the "rlc" package). Most examples are use randomly generated data simply for demonstration purposes (the code to generate the data is also provided). Some of them use the Iris dataset as an example (<a href="https://github.com/kloivenn/kloivenn.github.io/raw/master/Bioconductor2018/src/js/iris.js">iris.js</a> or run \'data("iris")\' in your R session). Since all these examples are quite basic, we do not offer a minimal code version.',
				no_min: true
			}, {
				name: "Drug screening pipeline",
				id: "drug",
				ar: "50%",
				descr: "description 4"
			}, {
				name: "Oral cancer, sample correlation",
				id: "oc_sc",
				ar: "50%",
				descr: "description 5"
			}];

		var code = "full", cur_ex = 0;

		d3.select("#tabs").selectAll(".tab")
			.data(examples)
			.enter()
			.append("div")
				.attr("class", (d, i) => i == 0 ? "tab active" : "tab")
				.text(d => d.name)
				.style("border-left", (d, i) => i == 0 ? "1px #224 solid" : "none")
				.on("click", function(d, i) {
					cur_ex = i;
					d3.select("#tabs").selectAll(".tab").classed("active", false);
					d3.select(this).classed("active", true);
					showExample(d);
				});
		d3.select("#navigation")
			.append("div")
				.attr("class", "filler");
		d3.select("#navigation")
			.style("height", (d3.select(".tab").node().getBoundingClientRect().height - 1) + "px");

		d3.select("#panel").selectAll(".button")
			.data(["Full", "Minimal", "R code", "JS code"])
			.enter()
			.append("div")
				.attr("class", "button")
				.attr("id", d => d == "Full" ? "full" : d == "Minimal" ? "min" : d == "R code" ? "rcode" : "jscode")
				.text(d => d);

		d3.select("#panel").select("#" + code)
			.classed("active", true);

		d3.select("#panel").selectAll("#full,#min")
			.on("click", switchCode);
		d3.select("#panel").selectAll("#rcode,#jscode")
			.on("click", showCode);

		showExample(examples[0]);

		function showExample(d) {
			d3.select("#example").select(".aspect-ratio")
				.style("padding-bottom", d.ar);
			if(d.no_min) {
				code = "full";
				d3.select("#full")
					.classed("active", true);
				d3.select("#min")
					.classed("disabled", true)
					.on("click", null)
			} else {
				d3.select("#min")
					.classed("disabled", false)
					.on("click", switchCode)			
			}
			d3.select("#example").select("iframe")
				.attr("src", "examples/" + d.id + "/" + d.id + "_" + code + ".html");
			d3.select("#description")
				.html(d.descr);
		}

		function switchCode(d) {
			d3.select("#panel").selectAll(".button")
				.classed("active", false);
			d3.select(this)
				.classed("active", true);
			code = this.id;
			d3.select("#example").select("iframe")
				.attr("src", "examples/" + examples[cur_ex].id + "/" + examples[cur_ex].id + "_" + code + ".html");
		}

		function showCode(d) {
			const lang = d.split(" ")[0];
			window.open("examples/" + examples[cur_ex].id + "/" + lang + "_code_" + code + ".html", 
				lang + " code for the example", "width=700,height=600");
		}
	</script>
</body>
</html>